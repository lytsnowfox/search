<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Echarts测试</title>
    <script src="../widget/echarts4.2.1.js"></script>
</head>
<body>
<div id="chart1" style="width: 1600px; height: 900px; margin: 0 auto; border: 2px solid #FF0000;"></div>
</body>

<script type="text/javascript">
    // 初始化echarts实例
    let myChart = echarts.init(document.getElementById("chart1"));

    let option = {
        title: {
            text: ''
        },
        tooltip: {},
        animationDurationUpdate: 1500,
        animationEasingUpdate: 'quinticInOut',
        label: {
            normal: {
                show: true,
                textStyle: {
                    fontSize: 12
                },
            }
        },
        legend: {
            x: "center",
            show: false
        },
        series: [
            {
                type: 'graph',
                layout: 'force',
                symbolSize: 45,
                focusNodeAdjacency: false,  // 是否在鼠标移到节点上的时候突出显示节点以及节点的边和邻接节点, 默认是true
                roam: true,
                edgeSymbol: ['none', 'arrow'],
                categories: [{
                    name: '查询实体',
                    itemStyle: {
                        normal: {
                            color: "#FF0000",
                        }
                    }
                }, {
                    name: '所属科室',
                    itemStyle: {
                        normal: {
                            color: "#4592FF",
                        }
                    }
                }, {
                    name: '常用药品',
                    itemStyle: {
                        normal: {
                            color: "#FFFF00",
                        }
                    }
                }, {
                    name: '宜吃',
                    itemStyle: {
                        normal: {
                            color: "#66CD00",
                        }
                    }
                }, {
                    name: '诊断检查',
                    itemStyle: {
                        normal: {
                            color: "#B8860B",
                        }
                    }
                }, {
                    name: '忌吃',
                    itemStyle: {
                        normal: {
                            color: "#B23AEE",
                        }
                    }
                }, {
                    name: '好评药品',
                    itemStyle: {
                        normal: {
                            color: "#FFB90F",
                        }
                    }
                }, {
                    name: '推荐食谱',
                    itemStyle: {
                        normal: {
                            color: "#7FFF00",
                        }
                    }
                },{
                    name: '症状',
                    itemStyle: {
                        normal: {
                            color: "#F08080",
                        }
                    }
                }, {
                    name: '并发症',
                    itemStyle: {
                        normal: {
                            color: "#87CEFA",
                        }
                    }
                }, {
                    name: '生产药品',
                    itemStyle: {
                        normal: {
                            color: "#FFFF00",
                        }
                    }
                }],
                label: {
                    normal: {
                        show: true,
                        textStyle: {
                            fontSize: 12,
                            fontStyle : 'normal',
                            fontWeight : 'bolder',
                            fontFamily : 'sans-serif',
                        },
                    }
                },
                force: {
                    repulsion: 1000,
                    edgeLength: [150, 100],
                    layoutAnimation : false
                    // 因为力引导布局会在多次迭代后才会稳定, 这个参数决定是否显示布局的迭代动画(节点数量过多, 图在迭代的过程中会旋转),
                    // 在浏览器端节点数据较多(>100)的时候不建议关闭, 布局过程会造成浏览器假死。
                },
                edgeSymbolSize: [4, 50],
                edgeLabel: {
                    normal: {
                        show: true,
                        textStyle: {
                            fontSize: 10
                        },
                        formatter: "{c}"   // 标签内容格式器。模板变量有 {a}、{b}、{c}，分别表示系列名，数据名，数据值。
                    }
                },
                data: [
                    {name: "胖佳", draggable: true, id: "0"},
                    {name: "帅彤彤", draggable: true, category: 7, id: "1"},
                    {name: "姜丝萝卜汤", draggable: true, category: 7, id: "2"},
                    {name: "葱蒜粥", draggable: true, category: 7, id: "3"},
                    {name: "薏米莲子粥", draggable: true, category: 7, id: "4"},
                    {name: "赤小豆粥", draggable: true, category: 7, id: "5"},
                    {name: "香椿芽粥", draggable: true, category: 7, id: "6"},
                    {name: "凉拌香椿", draggable: true, category: 7, id: "7"},
                    {name: "醋熘土豆丝", draggable: true, category: 7, id: "8"},
                    {name: "猪油（板油）", draggable: true, category: 5, id: "9"},
                    {name: "咸鱼", draggable: true, category: 5, id: "10"},
                    {name: "外卖", draggable: true, category: 5, id: "11"},
                    {name: "冰淇淋", draggable: true, category: 5, id: "12"},
                    {name: "芝麻", draggable: true, category: 3, id: "13"},
                    {name: "鸡蛋", draggable: true, category: 3, id: "14"},
                    {name: "南瓜子仁", draggable: true, category: 3, id: "15"},
                    {name: "鹌鹑蛋", draggable: true, category: 3, id: "16"}
                ],  // 节点
                links: [
                    {source: 0, target: "1", category: 0, value: "最喜欢", symbolSize: 10},
                    {source: 0, target: "2", category: 0, value: "推荐食谱", symbolSize: 10},
                    {source: 0, target: "3", category: 0, value: "推荐食谱", symbolSize: 10},
                    {source: 0, target: "4", category: 0, value: "推荐食谱", symbolSize: 10},
                    {source: 0, target: "5", category: 0, value: "推荐食谱", symbolSize: 10},
                    {source: 0, target: "6", category: 0, value: "推荐食谱", symbolSize: 10},
                    {source: 0, target: "7", category: 0, value: "推荐食谱", symbolSize: 10},
                    {source: 0, target: "8", category: 0, value: "推荐食谱", symbolSize: 10},
                    {source: 0, target: "9", category: 0, value: "忌吃", symbolSize: 10},
                    {source: 0, target: "10", category: 0, value: "忌吃", symbolSize: 10},
                    {source: 0, target: "11", category: 0, value: "忌吃", symbolSize: 10},
                    {source: 0, target: "12", category: 0, value: "忌吃", symbolSize: 10},
                    {source: 0, target: "13", category: 0, value: "宜吃", symbolSize: 10},
                    {source: 0, target: "14", category: 0, value: "宜吃", symbolSize: 10},
                    {source: 0, target: "15", category: 0, value: "宜吃", symbolSize: 10},
                    {source: 0, target: "16", category: 0, value: "宜吃", symbolSize: 10}
                ],  // 边或者关系
                lineStyle: {
                    normal: {
                        opacity: 0.5,
                        width: 1.0,
                        curveness: 0,
                        color: "#262626"
                    }
                }
            }
        ]
    };
    myChart.setOption(option);  // 这步很重要, 必须设置才可以有效
    myChart.on('click', function (param){
        console.log('param---->', param);  // 打印出param, 可以看到里边有很多参数可以使用
        //获取节点点击的数组序号
        var arrayIndex = param.dataIndex;
        console.log('arrayIndex---->', arrayIndex);
        console.log('name---->', param.name);
        if (param.dataType == 'node') {
            alert("点击了节点" + param.name)
        } else {
            alert("点击了边" + param.value)
        }
    });
</script>

</html>
